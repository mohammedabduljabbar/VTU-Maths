<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chapter 2 ‚Äì Limits & Continuity | VTU Maths Visual Lab</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #f5f7fb;
}

/* ---------- Nav ---------- */
.nav {
    background: #1e3c72;
    color: white;
    padding: 16px 28px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.nav a {
    color: white;
    text-decoration: none;
    font-size: 14px;
}

/* ---------- Header ---------- */
.header {
    text-align: center;
    padding: 40px 20px 30px;
}
.header h1 {
    margin-bottom: 6px;
}
.header p {
    color: #555;
}

/* ---------- Card ---------- */
.card {
    max-width: 1100px;
    margin: auto;
    background: white;
    padding: 30px;
    border-radius: 14px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.08);
}

/* ---------- Visualizer ---------- */
.visualizer {
    margin-top: 20px;
    padding: 20px;
    background: #f8f9ff;
    border-radius: 12px;
}

canvas {
    width: 100%;
    height: 400px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
}

/* ---------- Controls ---------- */
.controls {
    margin-top: 20px;
    text-align: center;
}
.controls input {
    width: 60px;
    padding: 6px;
    margin: 0 10px;
}
.controls button {
    padding: 10px 22px;
    margin: 5px;
    font-size: 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #2a5298;
    color: white;
}

/* ---------- Steps ---------- */
.step-box {
    margin-top: 25px;
    padding: 16px;
    background: #eef2ff;
    border-left: 6px solid #2a5298;
    border-radius: 8px;
}
.step-log {
    margin-top: 15px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    max-height: 220px;
    overflow-y: auto;
    font-size: 15px;
}
.step-log div {
    margin-bottom: 6px;
}

.vtu-note {
    margin-top: 28px;
    padding: 18px 22px;
    background: #eef3ff;
    border-left: 5px solid #2a5298;
    border-radius: 10px;
    font-size: 15px;
    line-height: 1.65;
    color: #333;
}

.vtu-note h3 {
    margin: 0 0 10px 0;
    font-size: 16.5px;
    color: #1e3c72;
}




</style>
</head>

<body>

<div class="nav">
    <strong>VTU Maths Visual Lab</strong>
    <a href="WebChittoor2.html">‚¨Ö Back to Home</a>
</div>

<div class="header">
    <h1>Chapter 2: Limits & Continuity</h1>
    <p>Visual understanding of limits using graphs</p>
</div>

<div class="card">

    <h2>Limit Visualizer (f(x) = x¬≤)</h2>

    <div class="visualizer">
        <canvas id="graph"></canvas>
    </div>

    <div class="controls">
        Limit at x =
        <input type="number" id="limitPoint" value="2">
        <br><br>
        <button id="animateBtn">‚ñ∂ Animate</button>
        <button id="nextBtn">‚è≠ Next Step</button>
    </div>

    <div class="step-box">
        <strong>Current Step:</strong>
        <div id="currentStep">Click a button to begin.</div>
    </div>

    <div class="step-log" id="stepLog">
        <strong>Solution Steps:</strong>
    </div>

    
    <!-- VTU NOTE NOW PART OF SAME FLOW -->
    <div class="vtu-note">
        <h3>VTU Exam Alignment</h3>
    
        <p>
            In VTU examinations, students are expected to evaluate the
            Left Hand Limit (LHL) and Right Hand Limit (RHL) separately
            before concluding the existence of a limit.
        </p>
    
        <p>
            This visual step-by-step approach mirrors the exact reasoning
            required in VTU answer scripts and helps students structure
            their answers logically.
        </p>
    </div>

</div>

<script>

let manualMode = false;

/* ---------- Canvas Setup ---------- */
const canvas = document.getElementById("graph");
const ctx = canvas.getContext("2d");

canvas.width = canvas.offsetWidth;
canvas.height = 400;

/* ---------- Draw Axes ---------- */
function drawAxes() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeStyle = "#999";

    ctx.beginPath();
    ctx.moveTo(50, 350);
    ctx.lineTo(canvas.width - 50, 350);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(50, 50);
    ctx.lineTo(50, 350);
    ctx.stroke();

    drawXAxisLabels(); // üëà ADD THIS
}


function drawXAxisLabels() {
    ctx.fillStyle = "#555";
    ctx.font = "13px Segoe UI";

    const xMin = -10;
    const xMax = 10;
    const step = 2;

    for (let x = xMin; x <= xMax; x += step) {
        const px = 50 + (x + 10) * ((canvas.width - 100) / 20);
        ctx.fillText(x, px - 6, 370);
    }
}


/* ---------- Draw Function ---------- */
function drawCurve() {
    ctx.strokeStyle = "#2a5298";
    ctx.lineWidth = 2;
    ctx.beginPath();

    for (let x = -10; x <= 10; x += 0.05) {
        const px = 50 + (x + 10) * ((canvas.width - 100) / 20);
        const py = 350 - (x * x) * 2.5;

        if (x === -10) ctx.moveTo(px, py);
        else ctx.lineTo(px, py);
    }

    ctx.stroke();
}

function drawMovingPoint(x, color) {
    const px = 50 + (x + 10) * ((canvas.width - 100) / 20);
    const py = 350 - (x * x) * 2.5;

    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(px, py, 6, 0, Math.PI * 2);
    ctx.fill();
}


/* ---------- Initial Draw ---------- */
drawAxes();
drawCurve();

/* ---------- Step System ---------- */
let steps = [];
let index = 0;

function log(msg) {
    document.getElementById("currentStep").textContent = msg;
    document.getElementById("stepLog").innerHTML += `<div>${msg}</div>`;
}

function buildSteps() {
    steps = [];
    index = 0;

    document.getElementById("stepLog").innerHTML =
        "<strong>Solution Steps:</strong>";


    const a = Number(document.getElementById("limitPoint").value);
    const logBox = document.getElementById("stepLog");

    logBox.innerHTML = "<strong>Solution Steps:</strong>";

    steps.push(() => {
        log("Given function f(x) = x¬≤");
        drawAxes();
        drawCurve();
    });

    steps.push(() => {
        log(`Evaluate Left Hand Limit as x ‚Üí ${a}`);
        drawAxes();
        drawCurve();
        drawMovingPoint(a - 1, "red");
    });

    steps.push(() => {
        log(`Evaluate Right Hand Limit as x ‚Üí ${a}`);
        drawAxes();
        drawCurve();
        drawMovingPoint(a + 1, "green");
    });

    steps.push(() => {
        log(`Since LHL = RHL = ${a * a}, the limit exists at x = ${a}`);
        drawAxes();
        drawCurve();
        drawMovingPoint(a, "blue");
    });
}



function nextStep() {
    manualMode = true;

    // Always rebuild steps on first manual click
    if (index === 0 || steps.length === 0) {
        buildSteps();
    }

    if (index < steps.length) {
        steps[index]();
        index++;
    }
}





function animate() {
    manualMode = false;

    buildSteps();

    let i = 0;
    const interval = setInterval(() => {
        if (i < steps.length) {
            steps[i++]();
        } else {
            clearInterval(interval);
        }
    }, 1200);
}



/* ---------- Button Wiring ---------- */
document.getElementById("nextBtn").onclick = nextStep;
document.getElementById("animateBtn").onclick = animate;
</script>





</body>
</html>
